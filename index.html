<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Omnicore Markdown Viewer</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="libs/prismjs/themes/prism-solarizedlight.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
  <noscript><link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600;700&display=swap" rel="stylesheet"></noscript>
  <script src="https://cdn.jsdelivr.net/npm/marked@9.1.6/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>
  <!-- PrismJS - Bundled Core and Language Components -->
  <script src="libs/prismjs/prism-bundle.js"></script>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="header-left">
        <a href="#" id="logoLink" title="Visit Omnicore">
          <img src="logo.png" alt="Logo" class="app-logo logo-light">
          <img src="logo_dark.png" alt="Logo" class="app-logo logo-dark">
        </a>
      </div>
      <div class="controls">
        <div class="tools-dropdown" id="fileDropdown">
          <button class="btn" id="fileBtn" data-i18n-title="title.file" title="File">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
              <polyline points="13 2 13 9 20 9"></polyline>
            </svg>
            <span data-i18n="file">File</span>
          </button>
          <div class="tools-menu" id="fileMenu">
            <div class="tools-menu-item" id="openFile">
              <span data-i18n="openFile">Open File</span>
              <span class="tools-shortcut">Ctrl+O</span>
            </div>
            <div class="tools-menu-item" id="toggleIndex">
              <span data-i18n="tableOfContents">Table of Contents</span>
            </div>
            <div class="tools-menu-item" id="toggleEdit">
              <span data-i18n="editMode">Edit Mode</span>
              <span class="tools-shortcut">Ctrl+E</span>
            </div>
            <div class="tools-menu-item" id="toggleNotes">
              <span data-i18n="allNotes">All Notes</span>
            </div>
            <div class="tools-menu-separator"></div>
            <div class="tools-menu-header" data-i18n="export">Export</div>
            <div class="tools-menu-item" id="exportPdf">
              <span data-i18n="exportPdf">Export as PDF</span>
            </div>
            <div class="tools-menu-item" id="exportWord">
              <span data-i18n="exportWord">Export as Word</span>
            </div>
            <div class="tools-menu-separator"></div>
            <div class="tools-menu-header" data-i18n="history">History</div>
            <div class="tools-menu-recent" id="fileMenuRecent">
              <div class="tools-menu-recent-empty" data-i18n="noRecentFiles">No recent files</div>
            </div>
          </div>
        </div>
        <div class="tools-dropdown" id="viewDropdown">
          <button class="btn" id="viewBtn" data-i18n-title="title.view" title="View">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
              <circle cx="12" cy="12" r="3"></circle>
            </svg>
            <span data-i18n="view">View</span>
          </button>
          <div class="tools-menu" id="viewMenu">
            <div class="tools-menu-item tools-zoom-row">
              <span data-i18n="zoom">Zoom</span>
              <div class="tools-zoom-controls">
                <button class="tools-zoom-btn" id="zoomOut" data-i18n-title="title.zoomOut" title="Zoom Out (Ctrl+-)">−</button>
                <span class="tools-zoom-level" id="zoomReset" data-i18n-title="title.zoomReset" title="Reset Zoom (Ctrl+0)">100%</span>
                <button class="tools-zoom-btn" id="zoomIn" data-i18n-title="title.zoomIn" title="Zoom In (Ctrl++)">+</button>
              </div>
            </div>
            <div class="tools-menu-separator"></div>
            <div class="tools-menu-item tools-toggle-item" id="darkModeToggle">
              <span data-i18n="darkMode">Dark Mode</span>
              <div class="tools-toggle-switch">
                <div class="tools-toggle-track">
                  <div class="tools-toggle-thumb"></div>
                </div>
              </div>
            </div>
            <div class="tools-menu-item tools-toggle-item" id="fullscreenToggle">
              <span data-i18n="fullscreen">Fullscreen</span>
              <span class="tools-shortcut">F11</span>
              <div class="tools-toggle-switch">
                <div class="tools-toggle-track">
                  <div class="tools-toggle-thumb"></div>
                </div>
              </div>
            </div>
            <div class="tools-menu-item tools-toggle-item" id="showNotesToggle" style="display:none;">
              <span data-i18n="showNotes">Show Notes</span>
              <div class="tools-toggle-switch">
                <div class="tools-toggle-track">
                  <div class="tools-toggle-thumb"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="tools-dropdown" id="toolsDropdown">
          <button class="btn" id="toolsBtn" data-i18n-title="title.tools" title="Tools">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
            </svg>
            <span data-i18n="tools">Tools</span>
          </button>
          <div class="tools-menu" id="toolsMenu">
            <div class="tools-menu-item has-submenu" id="langMenuItem">
              <span data-i18n="language">Language</span>
              <span class="submenu-arrow">›</span>
              <div class="tools-submenu" id="langSubmenu">
                <div class="tools-submenu-header" data-i18n="document">Document</div>
                <div class="tools-submenu-item active" data-lang="original" data-section="doc">
                  <span data-i18n="original">Original</span>
                  <span class="lang-check">✓</span>
                </div>
                <div class="tools-submenu-item" data-lang="en" data-section="doc">
                  <span data-i18n="english">English</span>
                  <span class="lang-check">✓</span>
                </div>
                <div class="tools-submenu-item" data-lang="tr" data-section="doc">
                  <span data-i18n="turkish">Turkish</span>
                  <span class="lang-check">✓</span>
                </div>
                <div class="tools-submenu-separator"></div>
                <div class="tools-submenu-header" data-i18n="interface">Interface</div>
                <div class="tools-submenu-item active" data-lang="en" data-section="ui">
                  <span>English</span>
                  <span class="lang-check">✓</span>
                </div>
                <div class="tools-submenu-item" data-lang="tr" data-section="ui">
                  <span>Turkish</span>
                  <span class="lang-check">✓</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
      <div class="loading-spinner"></div>
      <div class="loading-text" data-i18n="loading">Loading...</div>
    </div>

    <!-- File Info Bar -->
    <div id="fileInfoBar" class="file-info-bar" style="display: none;">
      <button id="navBackBtn" class="nav-btn" data-i18n-title="title.back" title="Back (Left Arrow)" disabled>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"></path>
        </svg>
      </button>
      <button id="navForwardBtn" class="nav-btn" data-i18n-title="title.forward" title="Forward (Right Arrow)" disabled>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M5 12h14M12 5l7 7-7 7"></path>
        </svg>
      </button>
      <button id="refreshBtn" class="nav-btn" data-i18n-title="title.refresh" title="Refresh Document (Ctrl+R)">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"></path>
        </svg>
      </button>
      <span class="nav-separator"></span>
      <svg class="file-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
        <polyline points="13 2 13 9 20 9"></polyline>
      </svg>
      <span id="fileName" class="file-name"></span>
      <span class="file-separator">•</span>
      <span id="filePath" class="file-path" title="Click to copy path"></span>
    </div>

    <!-- Search Panel -->
    <div id="searchPanel" class="search-panel">
      <div class="search-container">
        <input type="text" id="searchInput" class="search-input" data-i18n-placeholder="searchPlaceholder" placeholder="Search in document...">
        <span id="searchCounter" class="search-counter">0 of 0</span>
        <button class="search-btn" id="searchPrev" data-i18n-title="title.searchPrev" title="Previous (Shift+Enter)">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <button class="search-btn" id="searchNext" data-i18n-title="title.searchNext" title="Next (Enter)">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="9 18 15 12 9 6"></polyline>
          </svg>
        </button>
        <button class="search-btn" id="searchClose" data-i18n-title="title.searchClose" title="Close (Esc)">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
    </div>

    <div class="main-content">
      <div class="content-wrapper">
      <!-- Editor Panel -->
      <div id="editorPanel" class="editor-panel">
        <div class="editor-header">
          <span data-i18n="rawMarkdown">Raw Markdown</span>
          <div class="editor-controls">
            <span id="unsavedIndicator" class="unsaved-indicator" data-i18n="unsaved" style="display: none;">● Unsaved</span>
            <button id="saveButton" class="editor-save-btn" data-i18n-title="title.save" title="Save (Ctrl+S)">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                <polyline points="17 21 17 13 7 13 7 21"></polyline>
                <polyline points="7 3 7 8 15 8"></polyline>
              </svg>
              <span data-i18n="save">Save</span>
            </button>
            <button id="exitEditBtn" class="editor-exit-btn" data-i18n-title="title.exitEdit" title="Exit Edit Mode">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
              <span data-i18n="exit">Exit</span>
            </button>
          </div>
        </div>
        <textarea id="markdownEditor" class="markdown-editor" data-i18n-placeholder="editorPlaceholder" placeholder="Start typing markdown..."></textarea>
      </div>

      <div id="viewer" class="markdown-body">
        <div class="welcome">
          <h1 data-i18n="welcome.title">Welcome to Omnicore Markdown Viewer</h1>
          <p data-i18n="welcome.subtitle">Press Ctrl+O to open a markdown file</p>
          <div class="features">
            <h2 data-i18n="welcome.features">Features</h2>
            <ul>
              <li>Full HTML support in markdown</li>
              <li>Mermaid diagrams rendering</li>
              <li>OmniWare wireframe rendering</li>
              <li>PrismJS syntax highlighting (offline)</li>
              <li>Live markdown editor with split-view</li>
              <li>PDF export with full document support</li>
              <li>Word (.docx) export</li>
              <li>Auto-generated Table of Contents</li>
              <li>Search with highlighting (Ctrl+F)</li>
              <li>File path display with copy-to-clipboard</li>
              <li>Zoom controls (50%-200%)</li>
              <li>Fullscreen mode (F11)</li>
              <li>Recent files with delete & clear all</li>
            </ul>
          </div>
        </div>
      </div>

      <div id="notesPanel" class="notes-panel">
        <div class="notes-header">
          <span data-i18n="allNotes">All Notes</span>
          <div class="notes-header-actions">
            <button id="notesSearchToggle" class="notes-search-toggle" data-i18n-title="searchNotes" title="Search Notes">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
            </button>
            <button id="closeNotes" class="close-btn">&times;</button>
          </div>
        </div>
        <div id="notesSearchBar" class="notes-search-bar">
          <input type="text" id="notesSearchInput" class="notes-search-input" data-i18n-placeholder="notesSearchPlaceholder" placeholder="#ID or title...">
        </div>
        <div id="notesList" class="notes-list">
          <div class="notes-empty" data-i18n="noNotes">No notes found</div>
        </div>
      </div>

      <div id="indexPanel" class="index-panel">
        <div class="index-header">
          <span data-i18n="tableOfContents">Table of Contents</span>
          <button id="closeIndex" class="close-btn">×</button>
        </div>
        <div id="indexList" class="index-list">
          <div class="index-empty" data-i18n="noHeaders">No headers found</div>
        </div>
      </div>
    </div>
    </div>
  </div>

  <!-- Notification Toast -->
  <div id="notificationToast" class="notification-toast">
    <div class="notification-content">
      <svg class="notification-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="20 6 9 17 4 12"></polyline>
      </svg>
      <span id="notificationMessage" class="notification-message"></span>
    </div>
  </div>

  <!-- File Update Toast -->
  <div id="fileUpdateToast" class="file-update-toast">
    <div class="file-update-content">
      <svg class="file-update-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"></path>
      </svg>
      <div class="file-update-text">
        <strong data-i18n="fileUpdated">File Updated</strong>
        <p data-i18n="fileModifiedExternally">This file has been modified externally</p>
      </div>
      <div class="file-update-actions">
        <button id="reloadFileBtn" class="file-update-btn reload" onclick="reloadCurrentFile()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"></path>
          </svg>
          <span data-i18n="reload">Reload</span>
        </button>
        <button id="dismissFileUpdateBtn" class="file-update-btn dismiss" onclick="dismissFileUpdateNotification()">
          <span data-i18n="dismiss">Dismiss</span>
        </button>
      </div>
    </div>
  </div>

  <!-- App Update Toast -->
  <div id="appUpdateToast" class="app-update-toast">
    <div class="app-update-content">
      <div class="app-update-header">
        <svg class="app-update-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="7 10 12 15 17 10"></polyline>
          <line x1="12" y1="15" x2="12" y2="3"></line>
        </svg>
        <div class="app-update-text">
          <strong id="updateTitle">Update Available</strong>
          <p id="updateMessage">A new version is available</p>
        </div>
        <button id="closeUpdateToast" class="app-update-close" title="Dismiss">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div id="updateProgress" class="app-update-progress" style="display: none;">
        <div class="progress-bar">
          <div id="progressFill" class="progress-fill"></div>
        </div>
        <span id="progressText">0%</span>
      </div>
      <div id="updateActions" class="app-update-actions">
        <button id="downloadUpdateBtn" class="app-update-btn primary">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          <span data-i18n="downloadUpdate">Download Update</span>
        </button>
        <button id="installUpdateBtn" class="app-update-btn primary" style="display: none;">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"></path>
          </svg>
          <span data-i18n="restartInstall">Restart &amp; Install</span>
        </button>
        <button id="laterUpdateBtn" class="app-update-btn secondary" data-i18n="later">Later</button>
      </div>
    </div>
  </div>

  <!-- Context Menu -->
  <div id="contextMenu" class="context-menu">
    <div class="context-menu-item" id="ctxCopy">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
      </svg>
      <span data-i18n="ctx.copy">Copy</span>
      <span class="shortcut">Ctrl+C</span>
    </div>
    <div class="context-menu-item" id="ctxCopyPlain">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
        <polyline points="14 2 14 8 20 8"></polyline>
        <line x1="16" y1="13" x2="8" y2="13"></line>
        <line x1="16" y1="17" x2="8" y2="17"></line>
      </svg>
      <span data-i18n="ctx.copyPlain">Copy as Plain Text</span>
    </div>
    <div class="context-menu-item" id="ctxEditText" style="display:none;">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
      </svg>
      <span data-i18n="ctx.editText">Edit Text</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" id="ctxBold">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path>
        <path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path>
      </svg>
      <span data-i18n="ctx.bold">Bold</span>
      <span class="shortcut">Ctrl+B</span>
    </div>
    <div class="context-menu-item" id="ctxItalic">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="19" y1="4" x2="10" y2="4"></line>
        <line x1="14" y1="20" x2="5" y2="20"></line>
        <line x1="15" y1="4" x2="9" y2="20"></line>
      </svg>
      <span data-i18n="ctx.italic">Italic</span>
      <span class="shortcut">Ctrl+I</span>
    </div>
    <div class="context-menu-item" id="ctxCode">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="16 18 22 12 16 6"></polyline>
        <polyline points="8 6 2 12 8 18"></polyline>
      </svg>
      <span data-i18n="ctx.code">Code Block</span>
      <span class="shortcut">Ctrl+`</span>
    </div>
    <div class="context-menu-item" id="ctxList">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="8" y1="6" x2="21" y2="6"></line>
        <line x1="8" y1="12" x2="21" y2="12"></line>
        <line x1="8" y1="18" x2="21" y2="18"></line>
        <line x1="3" y1="6" x2="3.01" y2="6"></line>
        <line x1="3" y1="12" x2="3.01" y2="12"></line>
        <line x1="3" y1="18" x2="3.01" y2="18"></line>
      </svg>
      <span data-i18n="ctx.list">Make List</span>
    </div>
    <div class="context-menu-item" id="ctxRemoveFormat">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M4 7V4h16v3"></path>
        <path d="M5 20h6"></path>
        <path d="M13 4L9 20"></path>
        <line x1="1" y1="1" x2="23" y2="23"></line>
      </svg>
      <span data-i18n="ctx.removeFormat">Remove Formatting</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" id="ctxAddNote">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
        <polyline points="14 2 14 8 20 8"></polyline>
        <line x1="12" y1="11" x2="12" y2="17"></line>
        <line x1="9" y1="14" x2="15" y2="14"></line>
      </svg>
      <span data-i18n="ctx.addNote">Add Note</span>
    </div>
    <div class="context-menu-item" id="ctxEditNote" style="display:none;">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
      </svg>
      <span data-i18n="ctx.editNote">Edit Note</span>
    </div>
    <div class="context-menu-item" id="ctxDeleteNote" style="display:none;">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="3 6 5 6 21 6"></polyline>
        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
        <line x1="10" y1="11" x2="10" y2="17"></line>
        <line x1="14" y1="11" x2="14" y2="17"></line>
      </svg>
      <span data-i18n="ctx.deleteNote">Delete Note</span>
    </div>
    <div class="context-menu-item" id="ctxFindNote">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"></circle>
        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
      <span data-i18n="ctx.findNote">Find Note</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" id="ctxInsertImage">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
        <circle cx="8.5" cy="8.5" r="1.5"></circle>
        <polyline points="21 15 16 10 5 21"></polyline>
      </svg>
      <span data-i18n="ctx.insertImage">Insert Image</span>
    </div>
    <div class="context-menu-item" id="ctxDeleteImage" style="display:none;">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="3 6 5 6 21 6"></polyline>
        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
        <line x1="10" y1="11" x2="10" y2="17"></line>
        <line x1="14" y1="11" x2="14" y2="17"></line>
      </svg>
      <span data-i18n="ctx.deleteImage">Delete Image</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" id="ctxSelectAll">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
        <path d="M9 9h6v6H9z"></path>
      </svg>
      <span data-i18n="ctx.selectAll">Select All</span>
      <span class="shortcut">Ctrl+A</span>
    </div>
  </div>

  <!-- Notes Panel Context Menu -->
  <div id="notesPanelContextMenu" class="context-menu">
    <div class="context-menu-item" id="ctxNotesPanelEdit">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
      </svg>
      <span data-i18n="ctx.editNote">Edit Note</span>
    </div>
    <div class="context-menu-item" id="ctxNotesPanelDelete">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="3 6 5 6 21 6"></polyline>
        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
        <line x1="10" y1="11" x2="10" y2="17"></line>
        <line x1="14" y1="11" x2="14" y2="17"></line>
      </svg>
      <span data-i18n="ctx.deleteNote">Delete Note</span>
    </div>
  </div>

  <!-- Recent Files Context Menu -->
  <div id="recentContextMenu" class="context-menu">
    <div class="context-menu-item" id="ctxOpenFolder">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
      </svg>
      <span data-i18n="ctx.openFolder">Open Containing Folder</span>
    </div>
    <div class="context-menu-item" id="ctxCopyPath">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
      </svg>
      <span data-i18n="ctx.copyPath">Copy Path</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" id="ctxRemoveRecent">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="3 6 5 6 21 6"></polyline>
        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
      </svg>
      <span data-i18n="ctx.removeRecent">Remove from Recent</span>
    </div>
  </div>

  <!-- Note Dialog -->
  <div id="noteDialogOverlay" class="note-dialog-overlay">
    <div class="note-dialog">
      <div class="note-dialog-header">
        <span id="noteDialogTitle" data-i18n="addNote">Add Note</span>
        <button id="noteDialogClose" class="close-btn">&times;</button>
      </div>
      <div class="note-dialog-body">
        <div id="noteLabelRow">
          <label class="note-dialog-label" for="noteLabelName" data-i18n="label">Label</label>
          <input type="text" id="noteLabelName" class="note-dialog-input" data-i18n-placeholder="labelPlaceholder" placeholder="Label name...">
        </div>
        <label class="note-dialog-label" data-i18n="color">Color</label>
        <div class="note-color-picker">
          <button class="note-color-option selected" data-color="#ff6600" style="background:#ff6600;"></button>
          <button class="note-color-option" data-color="#e74c3c" style="background:#e74c3c;"></button>
          <button class="note-color-option" data-color="#27ae60" style="background:#27ae60;"></button>
          <button class="note-color-option" data-color="#2980b9" style="background:#2980b9;"></button>
          <button class="note-color-option" data-color="#8e44ad" style="background:#8e44ad;"></button>
          <button class="note-color-option" data-color="#f39c12" style="background:#f39c12;"></button>
        </div>
        <label class="note-dialog-label" for="noteTitle" data-i18n="title.note">Title</label>
        <input type="text" id="noteTitle" class="note-dialog-input" data-i18n-placeholder="noteTitlePlaceholder" placeholder="Note title...">
        <label class="note-dialog-label" for="noteContent" data-i18n="note">Note</label>
        <textarea id="noteContent" class="note-dialog-textarea" data-i18n-placeholder="notePlaceholder" placeholder="Write your note..." rows="4"></textarea>
      </div>
      <div class="note-dialog-footer">
        <span id="noteDialogId" class="note-dialog-id"></span>
        <button id="noteSaveBtn" class="note-dialog-btn primary" data-i18n="save">Save</button>
        <button id="noteCancelBtn" class="note-dialog-btn secondary" data-i18n="cancel">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Find Note Dialog -->
  <div id="findNoteOverlay" class="note-dialog-overlay">
    <div class="note-dialog" style="max-width:340px;">
      <div class="note-dialog-header">
        <span data-i18n="findNote">Find Note</span>
        <button id="findNoteClose" class="close-btn">&times;</button>
      </div>
      <div class="note-dialog-body">
        <label class="note-dialog-label" for="findNoteInput" data-i18n="idOrTitle">ID or Title</label>
        <input type="text" id="findNoteInput" class="note-dialog-input" data-i18n-placeholder="findNotePlaceholder" placeholder="#1 or note title...">
      </div>
      <div class="note-dialog-footer">
        <button id="findNoteBtn" class="note-dialog-btn primary" data-i18n="find">Find</button>
        <button id="findNoteCancelBtn" class="note-dialog-btn secondary" data-i18n="cancel">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Edit Text Dialog -->
  <div id="editTextOverlay" class="note-dialog-overlay">
    <div class="note-dialog" style="max-width:480px;">
      <div class="note-dialog-header">
        <span data-i18n="editText">Edit Text</span>
        <button id="editTextClose" class="close-btn">&times;</button>
      </div>
      <div class="note-dialog-body">
        <label class="note-dialog-label" for="editTextArea" data-i18n="editTextLabel">Edit the selected text:</label>
        <textarea id="editTextArea" class="note-dialog-textarea" rows="6"></textarea>
      </div>
      <div class="note-dialog-footer">
        <button id="editTextSaveBtn" class="note-dialog-btn primary" data-i18n="save">Save</button>
        <button id="editTextCancelBtn" class="note-dialog-btn secondary" data-i18n="cancel">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Note Tooltip -->
  <div id="noteTooltip" class="note-tooltip"></div>

  <script src="renderer.js"></script>
</body>
</html>
