<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OmniWare Demo â€” Teklif DeÄŸerlendirme</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: 'Segoe UI', Tahoma, sans-serif;
    background: #1a1a2e;
    color: #e0e0e0;
    display: flex;
    min-height: 100vh;
  }

  /* â”€â”€ Split layout â”€â”€ */
  .editor-pane {
    width: 45%;
    display: flex;
    flex-direction: column;
    border-right: 2px solid #333;
    position: sticky;
    top: 0;
    height: 100vh;
    overflow: hidden;
  }
  .preview-pane {
    flex: 1;
    overflow-y: auto;
    background: #f0ede6;
    padding: 20px;
  }

  /* â”€â”€ Editor Header â”€â”€ */
  .editor-header {
    padding: 12px 16px;
    background: #16213e;
    border-bottom: 1px solid #333;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .editor-header h2 {
    font-size: 14px;
    color: #8892b0;
    font-weight: normal;
  }
  .editor-header h2 b { color: #64ffda; }
  .render-btn {
    padding: 6px 16px;
    background: #64ffda;
    color: #1a1a2e;
    border: none;
    border-radius: 3px;
    font-weight: bold;
    font-size: 13px;
    cursor: pointer;
  }
  .render-btn:hover { background: #4dd4b0; }

  /* â”€â”€ Textarea â”€â”€ */
  .editor-area {
    flex: 1;
    overflow: hidden;
  }
  #dsl-input {
    width: 100%;
    height: 100%;
    background: #0a192f;
    color: #a8b2d1;
    border: none;
    padding: 16px;
    font-family: 'Fira Code', 'Consolas', monospace;
    font-size: 12.5px;
    line-height: 1.6;
    resize: none;
    outline: none;
    tab-size: 2;
  }

  /* â”€â”€ Preview Header â”€â”€ */
  .preview-header {
    padding: 12px 16px;
    background: #fff;
    border-bottom: 2px solid #ddd;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: -20px -20px 20px -20px;
  }
  .preview-header h2 {
    font-size: 14px;
    color: #333;
    font-weight: normal;
  }
  .preview-header h2 b { color: #5a9e6f; }

  @media (max-width: 1000px) {
    body { flex-direction: column; }
    .editor-pane { width: 100%; height: 50vh; position: relative; }
    .preview-pane { width: 100%; }
  }
</style>
</head>
<body>

<div class="editor-pane">
  <div class="editor-header">
    <h2><b>OmniWare</b> DSL Editor v1.0</h2>
    <button class="render-btn" onclick="renderPreview()">â–¶ Render</button>
  </div>
  <div class="editor-area">
    <textarea id="dsl-input" spellcheck="false">
@page "Teklif DeÄŸerlendirme" status:draft

@nav
  SADES | Ana Sayfa | Talepler | *Ä°hale YÃ¶netimi* | TedarikÃ§i | SÃ¶zleÅŸmeler | Raporlar

@breadcrumb
  âŒ‚ SADES > Ä°hale YÃ¶netimi > IH-2027-00142 > **Teklif DeÄŸerlendirme**

@section "Ä°hale Bilgileri" icon:info ref:FR-IH-001
  @grid cols:2
    Ä°hale No          : **IH-2027-00142**
    Ä°hale UsulÃ¼       : **AÃ§Ä±k Ä°hale** (KRL-AI)
    Ä°hale AdÄ±         : **VEDAÅ Trafo Merkezi BakÄ±m Hizmeti AlÄ±mÄ±**
    Durum             : {blue}DeÄŸerlendirme AÅŸamasÄ±nda
    Tahmini Tutar     : **4.250.000,00 â‚º**
    Ä°hale Tarihi      : **15.02.2027**
    Teklif SayÄ±sÄ±     : **5 adet (â‰¥3 âœ“)**
    Son Teklif        : **14.02.2027 â€” 17:00**

@section "EPDK 4 KatmanlÄ± Uyumluluk Durumu" icon:check ref:FR-UK-001~004
  @badges
    {green} UK-K1 Ã–n Kontrol: BAÅARILI
    {green} UK-K2 SÃ¼reÃ§ Kontrol: BAÅARILI
    {yellow} UK-K3 DokÃ¼man Kontrol: 1 UYARI
    {gray} UK-K4 SonuÃ§ Kontrol: BEKLÄ°YOR
  @note type:warning
    UK-K3 UyarÄ±: Delta Teknik Ltd. imza sirkÃ¼leri son geÃ§erlilik tarihi yaklaÅŸÄ±yor (22.02.2027)

@tabs
  *â‘  Yeterlik DeÄŸerlendirme* | â‘¡ Fiyat KarÅŸÄ±laÅŸtÄ±rma | â‘¢ AÃ§Ä±k Eksiltme | â‘£ DeÄŸerlendirme Raporu

@section "Yeterlik Kontrol Tablosu" ref:FR-TV-002,FR-TV-006,KRL-YET
  @table
    # | Ä°stekli AdÄ± | Ä°ÅŸ Deneyim (%50-%150) | YÄ±llÄ±k Ciro (â‰¤%200) | GeÃ§ici Teminat | Belgeler | SonuÃ§ | Ä°ÅŸlem
    --
    1 | **ABC Elektrik A.Å.** | {green}âœ“ %85 | {green}âœ“ %120 | {green}âœ“ %5 | {green}âœ“ Tam | {green}YETERLÄ° | [Detay]
    2 | **XYZ MÃ¼hendislik Ltd.** | {green}âœ“ %62 | {green}âœ“ %95 | {green}âœ“ %5 | {green}âœ“ Tam | {green}YETERLÄ° | [Detay]
    3 | **Mega Enerji A.Å.** | {green}âœ“ %110 | {red}âœ— %210 | {green}âœ“ %5 | {green}âœ“ Tam | {red}YETERSÄ°Z | [Detay]
    4 | **Delta Teknik Ltd.** | {green}âœ“ %72 | {green}âœ“ %88 | {green}âœ“ %5 | {yellow}âš  Eksik | {yellow}EKSÄ°K BELGE | [Detay]
    5 | **Anadolu Enerji San.** | {green}âœ“ %95 | {green}âœ“ %145 | {green}âœ“ %5 | {green}âœ“ Tam | {green}YETERLÄ° | [Detay]
  @buttons
    [primary] âœ“ Yeterlik SonuÃ§larÄ±nÄ± Onayla
    [default] âœ‰ Ä°steklilere Bildirim GÃ¶nder
    [default] ğŸ“„ Yeterlik TutanaÄŸÄ± OluÅŸtur (PDF)

@section "Fiyat KarÅŸÄ±laÅŸtÄ±rma Tablosu" icon:currency ref:FR-TV-005,FR-TV-007
  @alert type:info ref:KRL-TEK-002
    YalnÄ±zca YETERLÄ° isteklilerin fiyat zarflarÄ± aÃ§Ä±lmÄ±ÅŸtÄ±r. Yetersiz isteklilerin fiyat zarfÄ± aÃ§Ä±lmaz.
  @table
    SÄ±ra | Ä°stekli AdÄ± | Teklif Bedeli (TB) | Yerli MalÄ± | YO (%) | AUTB | SÄ±ralama
    --
    1 | **ABC Elektrik A.Å.** | 3.850.000,00 â‚º | âœ“ Evet | %80 | **4.312.000 â‚º** | {blue}#2
    2 | **XYZ MÃ¼hendislik Ltd.** | 4.100.000,00 â‚º | âœ— HayÄ±r | %0 | **4.100.000 â‚º** | {yellow}#3
    3 | **Anadolu Enerji San.** | 3.720.000,00 â‚º | âœ“ Evet | %100 | **4.278.000 â‚º** | {green}ğŸ† #1
  @locked "Fiyat zarfÄ± aÃ§Ä±lmadÄ± â€” Yeterlik baÅŸarÄ±sÄ±z (KRL-TEK-002)"
    @table
      4 | Mega Enerji A.Å. | â€” | â€” | â€” | â€” | â€”
      5 | Delta Teknik Ltd. | â€” | â€” | â€” | â€” | â€”
  @formula
    AUTB = TB + (YO Ã— YA Ã— TB)  |  YA (Yerli AvantajÄ±) = %15  (KRL-TEK-006)

@section "AI Fiyat Analizi" icon:chart ref:FR-AI-001,FR-AI-002
  @grid cols:2
    ğŸ“Š Piyasa OrtalamasÄ± : **3.950.000 â‚º**
    Sapma AralÄ±ÄŸÄ±        : **Â±%12**
    âš  Anomali            : {green}Tespit Edilmedi
    GÃ¼ven Skoru          : **%87**
  @placeholder height:80
    ğŸ“ˆ GeÃ§miÅŸ Fiyat Trendi GrafiÄŸi â€” Recharts / D3

@section "AÃ§Ä±k Eksiltme Oturumu" icon:play ref:FR-TV-004,KRL-TEK-004
  @grid cols:2
    Oturum Durumu : {blue}PlanlandÄ±
    BaÅŸlangÄ±Ã§     : **16.02.2027 â€” 14:00**
    Min. Ä°ndirim  : **%1**
    Tur SÃ¼resi    : **5 dakika**
  @buttons
    [primary] â–¶ Oturumu BaÅŸlat (BBB)
    [default] â± SÃ¼re Uzat
    [danger] â¹ Oturumu SonlandÄ±r
  @placeholder height:80
    ğŸ–¥ BigBlueButton Sanal Ä°hale OdasÄ± Embed AlanÄ± (FR-SIO-001)

@section "DeÄŸerlendirme Ã–zeti ve Komisyon KararÄ±" icon:star ref:FR-IS-001,FR-IS-002
  @radio "Komisyon KararÄ±"
    *Kazanan Belirle* | Ä°haleyi Ä°ptal Et | Ek DeÄŸerlendirme
  @grid cols:2
    Kazanan Ä°stekli : **Anadolu Enerji San.**
    SÃ¶zleÅŸme Bedeli : {green}**3.720.000,00 â‚º**
  @textarea "Karar GerekÃ§esi" rows:3
    En dÃ¼ÅŸÃ¼k AUTB deÄŸerine sahip, tÃ¼m yeterlik kriterlerini karÅŸÄ±layan istekli olarak belirlenmiÅŸtir. Yerli malÄ± oranÄ± %100 olup, fiyat avantajÄ± hesaplamasÄ± sonrasÄ± en ekonomik teklif olarak deÄŸerlendirilmiÅŸtir.
  @divider
  @buttons
    [success] âœ“ Ä°hale Yetkilisi OnayÄ±na GÃ¶nder
    [primary] ğŸ“„ DeÄŸerlendirme Raporu (PDF)
    [default] âœ‰ SonuÃ§ Bildirimi (KEP â‰¤2 iÅŸ gÃ¼nÃ¼)
    [default] ğŸŒ Ä°nternet Sitesinde YayÄ±nla
  @note type:info
    KEP bildirimi â‰¤2 iÅŸ gÃ¼nÃ¼ iÃ§inde gÃ¶nderilmelidir. Kazanan bilgisi VEDAÅ internet sitesinde sÃ¼resiz yayÄ±nlanÄ±r. (KRL-SON-003~006)

@footer
  ğŸ”’ TÃ¼m iÅŸlemler denetim izi kaydÄ± altÄ±ndadÄ±r (NFR-DNT)
  Son gÃ¼ncelleme: **sa_uzman01** â€” 16.02.2027 15:42 | SADES v1.0
</textarea>
  </div>
</div>

<div class="preview-pane" id="preview">
  <div class="preview-header">
    <h2><b>Preview</b> â€” Rendered Wireframe</h2>
  </div>
  <div id="render-target"></div>
</div>

<!-- Include the renderer -->
<script src="omniware.js"></script>
<script>
  function renderPreview() {
    const dsl = document.getElementById('dsl-input').value;
    OmniWare.render(dsl, document.getElementById('render-target'));
  }

  // Handle Tab key in textarea
  document.getElementById('dsl-input').addEventListener('keydown', function(e) {
    if (e.key === 'Tab') {
      e.preventDefault();
      const start = this.selectionStart;
      const end = this.selectionEnd;
      this.value = this.value.substring(0, start) + '  ' + this.value.substring(end);
      this.selectionStart = this.selectionEnd = start + 2;
    }
  });

  // Auto-render on load
  window.addEventListener('DOMContentLoaded', renderPreview);
</script>
</body>
</html>
